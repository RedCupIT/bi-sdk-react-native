{"version":3,"sources":["EmbeddedNativeModules.tsx"],"names":["BILoggerEmitter","NativeEventEmitter","addListener","event","listener","context","removeListener","removeAllListeners","LoggerEventEmitter","NativeModules","BiSdkReactNative","LINKING_ERROR","Platform","select","ios","default","EmbeddedNativeModules","Proxy","get","Error"],"mappings":";;;;;;;AAAA;;AAIA,MAAMA,eAAN,SAA8BC,+BAA9B,CAAiD;AAC/CC,EAAAA,WAAW,CACTC,KADS,EAETC,QAFS,EAGTC,OAHS,EAIT;AACA,WAAO,MAAMH,WAAN,CAAkBC,KAAlB,EAAyBC,QAAzB,EAAmCC,OAAnC,CAAP;AACD;;AACDC,EAAAA,cAAc,CAACH,KAAD,EAAgC;AAC5C,WAAO,MAAMI,kBAAN,CAAyBJ,KAAzB,CAAP;AACD;;AAV8C;;;AAajD,MAAMK,kBAAkB,GAAG,IAAIR,eAAJ,CAAoBS,2BAAcC,gBAAlC,CAA3B;;AAEA,MAAMC,aAAa,GAChB,8EAAD,GACAC,sBAASC,MAAT,CAAgB;AAAEC,EAAAA,GAAG,EAAE,gCAAP;AAAyCC,EAAAA,OAAO,EAAE;AAAlD,CAAhB,CADA,GAEA,sDAFA,GAGA,6CAJF;AAMA,MAAMC,qBAA4C,GAChDP,2BAAcC,gBAAd,GACID,2BAAcC,gBADlB,GAEI,IAAIO,KAAJ,CACE,EADF,EAEE;AACEC,EAAAA,GAAG,GAAG;AACJ,UAAM,IAAIC,KAAJ,CAAUR,aAAV,CAAN;AACD;;AAHH,CAFF,CAHN,C,CAYA;AACA","sourcesContent":["import { NativeEventEmitter, NativeModules, Platform } from 'react-native';\n\nimport type { Credential, Success } from './EmbeddedTypes';\n\nclass BILoggerEmitter extends NativeEventEmitter {\n  addListener(\n    event: 'BeyondIdentityLogger',\n    listener: (...args: any[]) => any,\n    context?: any\n  ) {\n    return super.addListener(event, listener, context);\n  }\n  removeListener(event: 'BeyondIdentityLogger') {\n    return super.removeAllListeners(event);\n  }\n}\n\nconst LoggerEventEmitter = new BILoggerEmitter(NativeModules.BiSdkReactNative);\n\nconst LINKING_ERROR =\n  `The package 'bi-sdk-react-native' doesn't seem to be linked. Make sure: \\n\\n` +\n  Platform.select({ ios: \"- You have run 'pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo managed workflow\\n';\n\nconst EmbeddedNativeModules: EmbeddedNativeModules =\n  NativeModules.BiSdkReactNative\n    ? NativeModules.BiSdkReactNative\n    : new Proxy(\n        {},\n        {\n          get() {\n            throw new Error(LINKING_ERROR);\n          },\n        }\n      );\n\n/// Types below represent models passed from Native layer to React.\n/// These modesl do no contain optional values, as empty strings would be passed instead.\ninterface NativeAuthenticateResponse {\n  redirectURL: string;\n  message: string;\n}\n\ninterface NativeBindCredentialResponse {\n  credential: Credential;\n  postBindingRedirectURI: string;\n}\n\ninterface EmbeddedNativeModules {\n  authenticate(\n    url: string,\n    credentialID: string\n  ): Promise<NativeAuthenticateResponse>;\n  bindCredential(url: string): Promise<NativeBindCredentialResponse>;\n  deleteCredential(id: string): Promise<string>;\n  getCredentials(): Promise<Credential[]>;\n  initialize(\n    allowedDomains: string[],\n    biometricAskPrompt: string\n  ): Promise<Success>;\n  isAuthenticateUrl(url: string): Promise<boolean>;\n  isBindCredentialUrl(url: string): Promise<boolean>;\n}\n\nexport { EmbeddedNativeModules, LoggerEventEmitter, BILoggerEmitter };\n"]}